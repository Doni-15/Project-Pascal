unit catur;

{$mode objfpc}{$H+}

interface

uses
  Classes, SysUtils, Forms, Controls, Graphics, Dialogs, ExtCtrls, StdCtrls,
  Menus, Buttons;

type
  { Tchess }
  Tchess = class(TForm)
    AboutUs: TButton;
    Button1: TButton;
    Image1: TImage;
    Image2: TImage;
    Image3: TImage;
    Image6: TImage;
    AvatarPutih: TPanel;
    AvatarHitam: TPanel;
    vs: TImage;
    Image4: TImage;
    Image5: TImage;
    PanelGambarAvatar1: TPanel;
    PihakPutih: TButton;
    PihakHitam: TButton;
    EditJam: TEdit;
    EditMenit: TEdit;
    EditDetik: TEdit;
    Label1: TLabel;
    Label2: TLabel;
    Label3: TLabel;
    LabelPilihanWaktu: TLabel;
    Custom: TButton;
    InputNamaPemainHitam: TEdit;
    InputNamaPemainPutih: TEdit;
    IsiAboutUs: TPanel;
    IsiMenuUtama: TPanel;
    Judul: TLabel;
    InGame: TPanel;
    LabelNamaPemainHItam: TLabel;
    LabelNamaPemainPutih: TLabel;
    PanelSurend: TPanel;
    PanelWaktuCustom: TPanel;
    PanelPilihanWaktu: TPanel;
    PanelGambarAvatar2: TPanel;
    ScrollIsiAboutUs: TScrollBox;
    TampilanMenuUtama: TPanel;
    TombolKeluar: TButton;
    TombolMenuUtama: TButton;
    TombolMulai: TButton;
    TombolMulaiPermainan: TButton;
    Menyerah: TButton;
    InfoPemainHitam: TPanel;
    InfoPemainPutih: TPanel;
    MenuPopUp: TPanel;
    PelacakGerakan: TPanel;
    TutupAboutUs: TButton;
    WaktuPemainPutih: TLabel;
    WaktuPemainHitam: TLabel;
    Timer1: TTimer;
    Timer2: TTimer;
    PapanCatur: TPanel;
    procedure AboutUsClick(Sender: TObject);
    procedure Button1Click(Sender: TObject);
    procedure CustomClick(Sender: TObject);
    procedure FormCreate(Sender: TObject);
    procedure MenyerahClick(Sender: TObject);
    procedure PilihAvatarHitamClick(Sender: TObject);
    procedure PilihAvatarPutihClick(Sender: TObject);
    procedure Timer1Timer(Sender: TObject);
    procedure Timer2Timer(Sender: TObject);
    procedure TombolKeluarClick(Sender: TObject);
    procedure TombolMenuUtamaClick(Sender: TObject);
    procedure TombolMulaiClick(Sender: TObject);
    procedure TombolMulaiPermainanClick(Sender: TObject);
    procedure TutupAboutUsClick(Sender: TObject);

  private
    klik : integer;
    BidakDipilih: TImage;
    procedure Papan;
    procedure BidakCatur;
    procedure PenghitunganWaktu1;
    procedure PenghitunganWaktu2;
    procedure Pembuat;
    procedure TampilkanMenuUtama;
    procedure TampilanTentangKami;
    procedure BuatTombolWaktu;
    procedure tombolWaktuClick(Sender: TObject);
    procedure BidakKlik(Sender: TObject);
    procedure KlikPapan(Sender: TObject);
    function HurufKeAngka(huruf: Char): Integer;
    procedure Pindahkan(Bidak : TImage; KotakTujuan : TShape);
    function KotakKosong(Kotak: TShape): Boolean;
  public
  end;

const
  UkuranKotak = 56;
  FileBidak: array[0..7] of string = ('benteng_', 'kuda_', 'gajah_', 'perwira_', 'raja_', 'gajah_', 'kuda_', 'benteng_');
  HurufKolom: array[0..7] of Char = ('A', 'B', 'C', 'D', 'E', 'F', 'G', 'H');
  BarisBidakHitam = 0;
  BarisBidakPutih = 7;


var
  chess: Tchess;
  menit, detik, jam : integer;
  pemainPutih, pemainHitam : TImage;
  PilihanAvatarPemain1, PilihanAvatarPemain2 : String;
  AvatarPemainPutih, AvatarPemainHitam, GambarBidak, PionDipilih: TImage;
  NamaInputPutih, NamaInputHitam : string;
  WaktuPemainPutih, WaktuPemainHitam : TLabel;
  editcustomJam, editcustomMenit, editcustomDetik : TEdit;
  tombolWaktu: TButton;

implementation

{$R *.lfm}

{ Tchess }

{*Bagian ini untuk tampilan awal atau tampilan ketika membuka game*}
//Membuat tombol keluar game
procedure Tchess.TombolKeluarClick(Sender: TObject);
var
  Pesan: string;
  Hasil: TModalResult;
begin
  Pesan := 'Apakah Anda yakin ingin keluar dari permainan?';  //Menampilkan pesan pada layar

  Hasil := MessageDlg('Konfirmasi', Pesan, mtConfirmation, [mbYes, mbNo], 0); //hasil di gunakan untuk menampilkan konfirmasi dengan 2 pilihan atao boolean
  if Hasil = mrYes then Application.Terminate
  else if Hasil = mrNo then Exit;
end;

//Menampilkan semua komponen dalam menu utama
procedure Tchess.TampilkanMenuUtama;
var
  JudulMenuUtama, LogoHitam, LogoPutih, gambar : TImage;
  i : integer;
begin
  // Membuat judul di menu utama
  JudulMenuUtama := TImage.Create(Self);
  JudulMenuUtama.Parent := TampilanMenuUtama;
  JudulMenuUtama.Picture.LoadFromFile('Resources/judul_besar.png');
  JudulMenuUtama.Width := 552;
  JudulMenuUtama.Height := 130;
  JudulMenuUtama.Top := 16;
  JudulMenuUtama.Left := 416;

  // Logo di samping nama pemain
  LogoPutih := TImage.Create(Self);
  LogoPutih.Parent := IsiMenuUtama;
  LogoPutih.Picture.LoadFromFile('Resources/raja_putih.png');
  LogoPutih.Top := 30;
  LogoPutih.Left := 25;

  LogoHitam := TImage.Create(Self);
  LogoHitam.Parent := IsiMenuUtama;
  LogoHitam.Picture.LoadFromFile('Resources/raja_hitam.png');
  LogoHitam.Top := 118;
  LogoHitam.Left := 25;

  TampilanTentangKami;
  BuatTombolWaktu;
  AvatarPutih.Visible := False;
  AvatarHitam.Visible := False;
  PanelWaktuCustom.Visible := False;
  TutupAboutUs.Visible := False;
  InGame.Visible := False;
  TampilanMenuUtama.Visible := True;
  PanelPilihanWaktu.Visible := False;
end;

//Membuat tampilan about us
procedure Tchess.TampilanTentangKami;
var
  ScrollAboutUs : TScrollBox;
  JudulAboutUs : TImage;
  LabelAboutUs :TLabel;
begin
  //membuat tombol scroll
  ScrollAboutUs := ScrollIsiAboutUs;
  ScrollAboutUs.HorzScrollBar.Visible := False;
  ScrollAboutUs.VertScrollBar.Visible := True;

  //membuat tampilan awal isi about us
  JudulAboutUs := TImage.Create(Self);
  JudulAboutUs.Parent := ScrollIsiAboutUs;
  JudulAboutUs.Picture.LoadFromFile('Resources/AboutUs.png');
  JudulAboutUs.Height := 515;
  JudulAboutUs.Width := 550;
  JudulAboutUs.Top := 5;
  JudulAboutUs.Left := -10;

  // Membuat kata-kata untuk isi about us
  LabelAboutUs := TLabel.Create(Self);
  LabelAboutUs.Parent := ScrollAboutUs;
  LabelAboutUs.Caption := 'Puji syukur kepada Tuhan Yang Maha Esa atas berkat Rahmat,' + sLineBreak + 'Hidayah, dan Karunia-Nya kepada kita semua sehingga pengembang' + sLineBreak + 'dapat menyelesaikan proyek Mata Kuliah Dasar Pemograman' + sLineBreak + 'dengan Proyek Game Catur. Proyek ini dibuat sebagai salah satu' + sLineBreak + 'syarat untuk memenuhi penilaian dalam Mata Kuliah ' + sLineBreak + 'Dasar Pemograman Prodi Ilmu Komputer, Universitas Sumatera Utara.' + sLineBreak  + sLineBreak + 'Pengembang menyadari dalam pembuatan proyek ini tidak akan ' + sLineBreak + 'selesai jika tanpa bantuan dari berbagai pihak. Karena itu pada' + sLineBreak + 'kesempatan ini pengembang ingin mengucapkan terima kasih' + sLineBreak + 'kepada Ibu Dian Rachmawati, S.Si., M.Kom selaku dosen' + sLineBreak + 'pengampu Mata Kuliah Dasar Pemograman untuk arahan dan' + sLineBreak + 'bimbingan yang telah Ibu berikan.' + sLineBreak + sLineBreak + 'Pengembang juga menyadari proyek ini tidak luput dari berbagai ' + sLineBreak + 'kekurangan. Pengembang mengharapkan saran dan kritik demi' + sLineBreak + 'kesempurnaan sehingga akhirnya proyek ini dapat memberikan' + sLineBreak + 'manfaat bagi bidang pendidikan dan bisa berkelanjutan di masa' + sLineBreak + 'mendatang.';
  LabelAboutUs.BiDiMode := bdLeftToRight;
  LabelAboutUs.Left := 5;
  LabelAboutUs.Top := JudulAboutUs.Height + 15;
  LabelAboutUs.Font.Size := 14;
  LabelAboutUs.Width := 530;
  LabelAboutUs.AutoSize := True;
  LabelAboutUs.WordWrap := False;

end;

//Prosedur ketika menekan tombol AboutUs
procedure Tchess.AboutUsClick(Sender: TObject);
begin
    IsiAboutUs.Visible := True;
    TutupAboutUs.Visible := True;
end;

//Membuat tombol untuk menampilkan pilihan waktu
procedure Tchess.Button1Click(Sender: TObject);
begin
  Inc(klik);
  if klik = 1 then
     PanelPilihanWaktu.Visible := True
  else if klik = 2 then
     PanelPilihanWaktu.Visible := False
  else
    klik := 0;
end;

//Mebuat tombol untuk memilih waktu
procedure Tchess.BuatTombolWaktu;
var
  i, p, l, spasi: Integer;
  opsiWaktu: array[0..6] of Integer = (1, 3, 5, 10, 20, 30, 60);
  tombolCustomWaktu : TButton;
begin
  p := 25;
  l := 75;
  spasi := 16;

  for i := 0 to High(opsiWaktu) do
  begin
    tombolWaktu := TButton.Create(Self);
    tombolWaktu.Parent := PanelPilihanWaktu;
    tombolWaktu.Caption := IntToStr(opsiWaktu[i]) + ' menit';
    tombolWaktu.Width := l;
    tombolWaktu.Height := p;
    tombolWaktu.Left := spasi + (i mod 3) * (l + spasi);
    tombolWaktu.Top := 55 + (i div 3) * (p + spasi);
    tombolWaktu.Tag := i; // Tandai tombol dengan indeks waktu
    tombolWaktu.OnClick := @tombolWaktuClick;
  end;

  editcustomJam := EditJam;
  editcustomMenit := EditMenit;
  editcustomDetik := EditDetik;
  tombolCustomWaktu := Custom;
  tombolCustomWaktu.OnClick := @CustomClick;
end;

//membuat tombol waktu bisa diklik
procedure Tchess.tombolWaktuClick(Sender: TObject);
var
  waktu: Integer;
begin
  // Ambil waktu dari Tag tombol yang diklik
  waktu := (Sender as TButton).Tag;

  // Atur waktu berdasarkan pilihan
  case waktu of
    0: begin jam := 0; menit := 1; ShowMessage('Anda memilih waktu permainan 1 menit'); PanelPilihanWaktu.Visible := False; end;  // 1 menit
    1: begin jam := 0; menit := 3; ShowMessage('Anda memilih waktu permainan 3 menit'); PanelPilihanWaktu.Visible := False; end;  // 3 menit
    2: begin jam := 0; menit := 5; ShowMessage('Anda memilih waktu permainan 5 menit'); PanelPilihanWaktu.Visible := False; end;  // 5 menit
    3: begin jam := 0; menit := 10; ShowMessage('Anda memilih waktu permainan 10 menit'); PanelPilihanWaktu.Visible := False; end; // 10 menit
    4: begin jam := 0; menit := 20; ShowMessage('Anda memilih waktu permainan 20 menit'); PanelPilihanWaktu.Visible := False; end; // 20 menit
    5: begin jam := 0; menit := 30; ShowMessage('Anda memilih waktu permainan 30 menit'); PanelPilihanWaktu.Visible := False; end; // 30 menit
    6: begin jam := 1; menit := 0; ShowMessage('Anda memilih waktu permainan 1 jam'); PanelPilihanWaktu.Visible := False; end;  // 1 jam
  end;

  // Tampilkan waktu awal pada label
  WaktuPemainPutih.Caption := Format('%.2d : %.2d : %.2d', [jam, menit, detik]);
  WaktuPemainHitam.Caption := Format('%.2d : %.2d : %.2d', [jam, menit, detik]);
end;

//Tombol membuat waktu custom
procedure Tchess.CustomClick(Sender: TObject);
var
  customJam, customMenit, customDetik : integer;
begin
  try
     // Membaca input dari Edit
     customJam := StrToInt(editcustomJam.Text);
     customMenit := StrToInt(editcustomMenit.Text);
     customDetik := StrToInt(editcustomDetik.Text);

     // Validasi input
     if (customJam < 0) or (CustomJam > 24) or (customMenit < 0) or (customMenit >= 60) or (customDetik < 0) or (customDetik >= 60) then
     begin
       ShowMessage('Input waktu tidak valid! Pastikan waktu sesuai.');
       Exit;
     end;

     // Atur waktu permainan
     jam := customJam;
     menit := customMenit;
     detik := customDetik;

     // Tampilkan waktu pada label
     WaktuPemainPutih.Caption := Format('%.2d : %.2d : %.2d', [jam, menit, detik]);
     WaktuPemainHitam.Caption := Format('%.2d : %.2d : %.2d', [jam, menit, detik]);

   except
     on E: EConvertError do
       ShowMessage('Input harus berupa angka.');
   end;

  Inc(klik);
  if klik = 1 then
  begin
    PanelWaktuCustom.Visible := True;
    tombolWaktu.Enabled := False;
    ShowMessage('Jangan lupa klik tombol Custom Kembali utuk menyimpan waktu yang anda custom');
  end
  else if klik = 2 then
  begin
    tombolWaktu.Enabled := True;
    PanelWaktuCustom.Visible := False
  end
  else
    klik := 0;
end;

//Tombol memilih Avatar putih
procedure Tchess.PilihAvatarPutihClick(Sender: TObject);
begin
  Inc(klik);
  if klik = 1 then
  begin
     AvatarPutih.Visible := True;
     AvatarHitam.Visible := True;
  end
  else if klik = 2 then
  begin
     AvatarPutih.Visible := False;
     AvatarHitam.Visible := False;
  end
  else
    klik := 0;
end;

//Tombol memilih Avatar putih
procedure Tchess.PilihAvatarHitamClick(Sender: TObject);
begin
  Inc(klik);
  if klik = 1 then
  begin
     AvatarPutih.Visible := True;
     AvatarHitam.Visible := True;
  end
  else if klik = 2 then
  begin
     AvatarPutih.Visible := False;
     AvatarHitam.Visible := False;
  end
  else
    klik := 0;
end;

//Membuat kondisi ketika tombol mulai di menu utama ditekan mengarahkan ke game caturnya
procedure Tchess.TombolMulaiClick(Sender: TObject);
begin
  If (InputNamaPemainPutih.Text = '') and (InputNamaPemainHitam.Text = '') then
  begin
    ShowMessage('Nama tidak boleh kosong!');
  end
  else if (jam = 0) and (menit = 0) and (detik = 0) then
  begin
     ShowMessage('Silahkan isi waktu permainan anda!');
     TampilanMenuUtama.Visible := True;
     InGame.Visible := False;
     PanelPilihanWaktu.Visible := True;
  end
  else
  begin
    //memasukkan nama yang diinputke dalam tabel informasi di dalam game
    LabelNamaPemainPutih.Caption := InputNamaPemainPutih.Text;
    LabelNamaPemainHitam.Caption := InputNamaPemainHitam.Text;

    // Sembunyikan TampilanMenuUtama dan tampilkan InGame
    TampilanMenuUtama.Visible := False;
    InGame.Visible := True;
  end;
end;

//Tombol menutup about us
procedure Tchess.TutupAboutUsClick(Sender: TObject);
begin
  IsiAboutUs.Visible := False;
  TutupAboutUs.Visible := False;
end;

{Tampilan ini untuk membuat semua struktur dan isi pada tampilan permainan ketika tombol mulai pada menu utama}
//membuat huruf ke angka
function Tchess.HurufKeAngka(huruf: Char): Integer;
begin
  case huruf of
    'A': Result := 1;
    'B': Result := 2;
    'C': Result := 3;
    'D': Result := 4;
    'E': Result := 5;
    'F': Result := 6;
    'G': Result := 7;
    'H': Result := 8;
  else
    Result := -1; // Jika input tidak valid
  end;
end;

// Prosedur untuk menggambar papan catur dengan kotak-kotak dan angka serta huruf
procedure Tchess.Papan;
var
  ukuran, i, j: integer;
  lbl: TLabel;
  huruf : array [0..7] of char = ('A', 'B', 'C', 'D', 'E', 'F', 'G', 'H');
  kotakPapan : TShape;
begin
  ukuran := 56; // Ukuran kotak catur
  PapanCatur.Height := 448;
  papanCatur.Width := 448;

  // Membuat kotak-kotak kecil pada papan catur
  for i := 1 to 8 do
  begin
    for j := 1 to 8 do
    begin
      kotakPapan := TShape.Create(Self);
      kotakPapan.Parent := PapanCatur;
      kotakPapan.Width := PapanCatur.Width div 8;
      kotakPapan.Height := PapanCatur.Height div 8;
      kotakPapan.Left := (j - 1) * ukuran;
      kotakPapan.Top := (i - 1) * ukuran;
      kotakPapan.Name := 'Kotak' + IntToStr(i) + IntToStr(j);
      kotakPapan.Tag := i * 7 + j;
      kotakPapan.OnClick := @KlikPapan;

      // Warna kotak
      if (i + j) mod 2 = 0 then
        kotakPapan.Brush.Color := RGBToColor(211, 211, 211) // Warna abu-abu muda
      else
        kotakPapan.Brush.Color := RGBToColor(62, 122, 52);  // Warna hijau tua

      kotakPapan.Pen.Style := psClear; // Hilangkan border
    end;
  end;

  // Huruf di atas papan (A-H)
  for i := 0 to 7 do
  begin
    lbl := TLabel.Create(Self);
    lbl.Parent := PapanCatur;
    lbl.Caption := huruf[i];
    lbl.Left := i * ukuran + 40;
    lbl.Top := 1;
    lbl.Font.Size := 12;
    lbl.Font.Color := clBlack;
  end;

  // Angka di sisi kiri papan (1-8)
  for i := 0 to 7 do
  begin
    lbl := TLabel.Create(Self);
    lbl.Parent := PapanCatur;
    lbl.Caption := IntToStr(8 - i);
    lbl.Left := 5;
    lbl.Top := i * ukuran + 35;
    lbl.Font.Size := 12;
    lbl.Font.Color := clBlack;
  end;
end;

// Prosedur untuk menambahkan bidak catur
procedure Tchess.BidakCatur;
var
  i: Integer;
begin

  // Menambahkan bidak hitam dan putih di baris belakang
  for i := 0 to 7 do
  begin
    // Tambahkan bidak hitam
    GambarBidak := TImage.Create(Self);
    GambarBidak.Parent := PapanCatur;
    GambarBidak.Picture.LoadFromFile('Resources/' + FileBidak[i] + 'hitam.png');
    GambarBidak.SetBounds((i * UkuranKotak) + 10, BarisBidakHitam * UkuranKotak + 10, UkuranKotak, UkuranKotak);
    GambarBidak.OnClick := @BidakKlik;
    GambarBidak.Tag := 400 + i;
    GambarBidak.Name := FileBidak[i] + 'Hitam' + HurufKolom[i] + '8';

    // Tambahkan bidak putih
    GambarBidak := TImage.Create(Self);
    GambarBidak.Parent := PapanCatur;
    GambarBidak.Picture.LoadFromFile('Resources/' + FileBidak[i] + 'putih.png');
    GambarBidak.SetBounds((i * UkuranKotak) + 10, BarisBidakPutih * UkuranKotak + 10, UkuranKotak, UkuranKotak);
    GambarBidak.OnClick := @BidakKlik;
    GambarBidak.Tag := 300 + i;
    GambarBidak.Name := FileBidak[i] + 'Putih' + HurufKolom[i] +  '1';
  end;

  // Menambahkan pion hitam di baris kedua
  for i := 0 to 7 do
  begin
    GambarBidak := TImage.Create(Self);
    GambarBidak.Parent := PapanCatur;
    GambarBidak.Picture.LoadFromFile('Resources/pion_hitam.png');
    GambarBidak.SetBounds((i * UkuranKotak) + 10, 1 * UkuranKotak + 10, UkuranKotak, UkuranKotak);
    GambarBidak.OnClick := @BidakKlik;
    GambarBidak.Tag := 200 + i;
    GambarBidak.Name := 'Pion_Hitam' + HurufKolom[i] + '7';

    // Tambahkan pion putih di baris keenam
    GambarBidak := TImage.Create(Self);
    GambarBidak.Parent := PapanCatur;
    GambarBidak.Picture.LoadFromFile('Resources/pion_putih.png');
    GambarBidak.SetBounds((i * UkuranKotak) + 10, 6 * UkuranKotak + 10, UkuranKotak, UkuranKotak);
    GambarBidak.OnClick := @BidakKlik;
    GambarBidak.Tag := 100 + i;
    GambarBidak.Name := 'Pion_Putih' + HurufKolom[i] + '2';
  end;
end;

//membuat klik
procedure Tchess.BidakKlik(Sender :TObject);
begin
  PionDiPilih := TImage(Sender);
  ShowMessage(GambarBidak.Name);
end;

//membuat papan bisa di klik
procedure Tchess.KlikPapan(Sender: TObject);
var
  KotakTujuan: TShape;
  BarisAwal, KolomAwal, BarisTujuan, KolomTujuan: Integer;
  IsLangkahPertama: Boolean;
begin
  KotakTujuan := TShape(Sender);
  if Assigned(PionDipilih) then
  begin
    // posisi awal dan tujuan
    BarisAwal := StrToInt(PionDipilih.Name[Length(PionDipilih.Name)]);
    KolomAwal := HurufKeAngka(PionDipilih.Name[Length(PionDipilih.Name) - 1]);
    BarisTujuan := StrToInt(KotakTujuan.Name[Length(KotakTujuan.Name)]);
    KolomTujuan := HurufKeAngka(KotakTujuan.Name[Length(KotakTujuan.Name) - 1]);

    // Cek apakah pion di langkah pertama
    IsLangkahPertama := (BarisAwal = 2) or (BarisAwal = 7);

    if Assigned(PionDipilih) then
    begin
      if (KolomTujuan = KolomAwal) and (KotakKosong(KotakTujuan)) then
      begin
        // Gerakan maju pion
        if ((PionDipilih.Tag >= 100) and (PionDipilih.Tag < 200) and (BarisTujuan = BarisAwal + 1)) or ((PionDipilih.Tag >= 200) and (PionDipilih.Tag < 300) and (BarisTujuan = BarisAwal - 1)) then
        begin
          Pindahkan(PionDipilih, KotakTujuan);
        end;
      end
      else if (Abs(KolomTujuan - KolomAwal) = 1) and (not KotakKosong(KotakTujuan)) then
      begin
        // Gerakan menyerang pion
        if ((PionDipilih.Tag >= 100) and (PionDipilih.Tag < 200) and (BarisTujuan = BarisAwal + 1)) or ((PionDipilih.Tag >= 200) and (PionDipilih.Tag < 300) and (BarisTujuan = BarisAwal - 1)) then
        begin
          Pindahkan(PionDipilih, KotakTujuan);
        end;
      end;
    end;
  end;
end;

function Tchess.KotakKosong(Kotak: TShape): Boolean;
var
  i: Integer;
begin
  Result := True;
  for i := 0 to PapanCatur.ControlCount - 1 do
  begin
    if (PapanCatur.Controls[i] is TImage) and (TImage(PapanCatur.Controls[i]).Left = Kotak.Left) and (TImage(PapanCatur.Controls[i]).Top = Kotak.Top) then
    begin
      Result := False;
      Exit;
    end;
  end;
end;

procedure Tchess.Pindahkan(Bidak : TImage; KotakTujuan : TShape);
begin
  // Pindahkan pion ke posisi tujuan
  BidakDipilih.Left := KotakTujuan.Left + 10;
  BidakDipilih.Top := KotakTujuan.Top + 10;
  BidakDipilih := nil;
end;

// Prosedur penghitungan waktu
procedure Tchess.PenghitunganWaktu1;
begin
  if detik > 0 then
    Dec(detik)
  else if menit > 0 then
  begin
    detik := 60;
    Dec(menit);
  end
  else if jam > 0 then
  begin
    menit := 60;
    Dec(jam);
  end;

  // Menampilkan waktu dengan format pada label baru di dalam panel
  WaktuPemainPutih.Caption := Format('%.2d : %.2d : %.2d', [jam, menit, detik]);
  WaktuPemainPutih.Left := 10;

  WaktuPemainHitam.Caption := Format('%.2d : %.2d : %.2d', [jam, menit, detik]);
  WaktuPemainHitam.Left := 360;
end;

// Prosedur penghitungan waktu
procedure Tchess.PenghitunganWaktu2;
begin
  if detik > 0 then
    Dec(detik)
  else if menit > 0 then
  begin
    detik := 60;
    Dec(menit);
  end
  else if jam > 0 then
  begin
    menit := 60;
    Dec(jam);
  end;

  // Menampilkan waktu dengan format pada label baru di dalam panel
  WaktuPemainPutih.Caption := Format('%.2d : %.2d : %.2d', [jam, menit, detik]);
  WaktuPemainPutih.Left := 10;

  WaktuPemainHitam.Caption := Format('%.2d : %.2d : %.2d', [jam, menit, detik]);
  WaktuPemainHitam.Left := 360;
end;

//prosedur waktu pemain hitam
procedure Tchess.Timer1Timer(Sender: TObject);
begin
  PenghitunganWaktu1;
end;

//prosedur waktu pemain putih
procedure Tchess.Timer2Timer(Sender: TObject);
begin
  PenghitunganWaktu2;
end;

//prosedur mebuat icon untuk judul game
procedure Tchess.Pembuat;
var
  IconJudul, Pengembang : TImage;
begin
  IconJudul := TImage.Create(Self);
  IconJudul.Parent := MenuPopUp;
  IconJudul.Width := 258;
  IconJudul.Height := 82;
  IconJudul.Picture.LoadFromFile('Resources/judul.png');
  IconJudul.Left := 10;
  IconJudul.Top := 10;

  Pengembang := TImage.Create(Self);
  Pengembang.Parent := MenuPopUp;
  Pengembang.Width := 258;
  Pengembang.Height := 200;
  Pengembang.Picture.LoadFromFile('Resources/sigma.png');
  Pengembang.Left := 10;
  Pengembang.Top := 460;
end;

//Membuat kondisi ketika tombol mulai dtekan
procedure Tchess.TombolMulaiPermainanClick(Sender: TObject);
begin
  Timer1.Enabled := True;
  Timer2.Enabled := True;
end;

//membuat tombol untuk meyerah
procedure Tchess.MenyerahClick(Sender: TObject);
begin
  Inc(klik);
  if klik = 2 then
    PanelSurend.Visible := True
  else if klik = 1 then
    PanelSurend.Visible := False
  else
    klik := 0;
end;

//membuat tombol menu utama pada menu pop up di dalam game
procedure Tchess.TombolMenuUtamaClick(Sender: TObject);
begin
  InGame.Visible := False;
  TampilanMenuUtama.Visible := True;
  jam := 0;
  menit:= 0;
  detik := 0;
end;

//prosedur program utama
procedure Tchess.FormCreate(Sender: TObject);
begin
  Papan;
  BidakCatur;
  Pembuat;
  TampilkanMenuUtama;

  vs.Picture.LoadFromFile('Resources/vs.png');
  Image4.Picture.LoadFromFile('Resources/Avatar0.png');
  Image5.Picture.LoadFromFile('Resources/Avatar4.png');
  Image1.Picture.LoadFromFile('Resources/Avatar0.png');
  Image2.Picture.LoadFromFile('Resources/Avatar4.png');

  PanelSurend.Visible := False;
end;

end.











































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































